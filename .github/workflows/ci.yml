name: "Web3swift CI"

on: 
  push:
    branches: 
      - master
      - develop
      - hotfix
      - github-actions
    paths:
      - Sources/**
      - 'Tests/**'
      - 'web3swift*/**'
      - '.github/workflows/**'

concurrency: 
  group: ci
  cancel-in-progress: true
jobs:
  SPM:
    name: Test macOS 11 (5.4)
    runs-on: macOS-11
    env:
      DEVELOPER_DIR: /Applications/Xcode_12.5.1.app/Contents/Developer
    strategy:
      fail-fast: false
      max-parallel: 2
      matrix:
        destination: ['OS=14.5,name=iPhone 12']
    steps:
      - uses: actions/checkout@v2
      # - name: Fetch dependencies
      #   run: |
      #     carthage bootstrap --no-use-binaries --platform iOS --cache-builds
      #     bundle exec pod install
      #     swift package update
      - name: Resolve dependencies
        run: swift package resolve
      - name: Test
        run: swift test --filter localTests